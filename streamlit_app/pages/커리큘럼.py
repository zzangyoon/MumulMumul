import streamlit as st
import pandas as pd
import altair as alt

st.set_page_config(layout="wide")
st.title("π“ μ»¤λ¦¬νλΌ λ‚μ΄λ„ & μ¶”κ°€ ν•™μµ μ”κµ¬ λ¶„μ„")

# -----------------------------
# κ°€μ§ λ°μ΄ν„° μƒμ„± (μ§‘κ³„ λ‹¨μ„: μ£Όμ°¨/ννΈ/μ§λ¬Έ μ ν•)
# -----------------------------

# μ£Όμ°¨λ³„ μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ
weeks = [
    "Week 1 - νμ΄μ¬ κΈ°μ΄",
    "Week 2 - λ°μ΄ν„° μ²λ¦¬",
    "Week 3 - Git ν‘μ—…",
    "Week 4 - ν”„λ΅μ νΈ κΈ°ν",
    "Week 5 - ν™κ²½ μ„Έν…",
    "Week 6 - λ¨λΈλ§",
]
curr_q_count = [12, 19, 54, 21, 43, 18]

df_curr_by_week = pd.DataFrame(
    {"ν•™μµ κµ¬κ°„": weeks, "μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ": curr_q_count}
)

# μ „μ²΄ μ§λ¬Έ μ¤‘ μ»¤λ¦¬νλΌ λ‚΄/μ™Έ λΉ„μ¨
df_curr_vs_extra = pd.DataFrame(
    {
        "μ§λ¬Έ μ ν•": ["μ»¤λ¦¬νλΌ λ‚΄", "μ»¤λ¦¬νλΌ μ™Έ"],
        "μ§λ¬Έ μ": [156, 58],
    }
)

# μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ μ£Όμ” μΉ΄ν…κ³ λ¦¬
df_extra_topics = pd.DataFrame(
    {
        "μ£Όμ ": [
            "ν¬νΈν΄λ¦¬μ¤/μ΄λ ¥μ„",
            "λ©΄μ ‘/μ»¤λ¦¬μ–΄",
            "κ°λ° ν™κ²½ μ„¤μ •(IDE)",
            "ν‘μ—…/μ»¤λ®¤λ‹μΌ€μ΄μ…",
        ],
        "μ§λ¬Έ μ": [21, 15, 12, 10],
    }
)

# μ»¤λ¦¬νλΌ λ‚΄μ—μ„ μμ£Ό λ“±μ¥ν•λ” μ–΄λ ¤μ›€ μ ν•
df_curr_difficulty_types = pd.DataFrame(
    {
        "μ–΄λ ¤μ›€ μ ν•": [
            "Git μ¶©λ ν•΄κ²°",
            "ν™κ²½ λ³€μ μ„¤μ •",
            "λ°μ΄ν„° μ „μ²λ¦¬ λ΅μ§",
            "λ¨λΈ μ΄ν•΄/νλ‹",
        ],
        "μ§λ¬Έ μ": [27, 19, 15, 11],
    }
)

# Altair κΈ°λ³Έ μµμ… (ν΄ν/ν°νΈ ν¬κΈ° λ“±)
# alt.themes.set("none")


# -----------------------------
# νƒ­ κµ¬μ„±
# -----------------------------
tab_summary, tab_ai, tab_detail = st.tabs(
    ["μ”μ•½", "AI μ‹¬μΈµ λ¶„μ„", "μ§€ν‘ μƒμ„Έ λ³΄κΈ°"]
)

# -----------------------------
# νƒ­ 1: μ”μ•½
# -----------------------------
with tab_summary:
    st.subheader("μ΄λ² μ£Ό ν•µμ‹¬ μ”μ•½")

    # 1) ν•µμ‹¬ μμΉλ§ μΉ΄λ“λ΅ λ‚¨κΈ°κΈ°
    col1, col2, col3 = st.columns(3)

    with col1:
        st.metric("μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ", "156κ±΄", "β–² 42κ±΄")

    with col2:
        st.metric("μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ λΉ„μ¨", "27%", "β–² 8%p")

    with col3:
        st.metric("μ¶”μ² μ¶”κ°€ μ„Έμ… μ£Όμ ", "3κ°")

    # 2) κ°€μ¥ μ§λ¬Έ λ§μ€ ννΈλ” μ•„λ ν•μ΄λΌμ΄νΈ λΈ”λ΅μΌλ΅ λ³„λ„ λ¶„λ¦¬
    st.markdown("### π” μ΄λ² μ£Ό κ°€μ¥ μ§λ¬Έμ΄ λ°λ¦° ννΈ")
    st.info(
        """
        **Week 3 - Git ν‘μ—…** κµ¬κ°„μ—μ„ μ§λ¬Έμ΄ κ°€μ¥ λ§μ΄ λ°μƒν–μµλ‹λ‹¤.  
        - Git μ¶©λ ν•΄κ²°  
        - λΈλμΉ μ „λµ  
        - rebase / pull / merge νΌλ€  
        λ“±μ΄ μ£Όμ” μ›μΈμ…λ‹λ‹¤.
        """
    )

    st.markdown("---")
    st.markdown("### μ „μ²΄ μ§λ¬Έ λ¶„ν¬ ν•λμ— λ³΄κΈ°")

    col_a, col_b = st.columns(2)
    # subtab1, subtab2 = st.tabs(
    #     [
    #         "μ»¤λ¦¬νλΌ λ‚΄ vs μ™Έ μ§λ¬Έ λΉ„μ¨",
    #         "μ£Όμ°¨/ννΈλ³„ μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ",
    #     ]
    # )

    with col_a:
        st.markdown("**1) μ»¤λ¦¬νλΌ λ‚΄ vs μ™Έ μ§λ¬Έ λΉ„μ¨**")
        chart_ratio = (
            alt.Chart(df_curr_vs_extra)
            .mark_arc(innerRadius=40)
            .encode(
                theta="μ§λ¬Έ μ:Q",
                color=alt.Color("μ§λ¬Έ μ ν•:N"),
                tooltip=["μ§λ¬Έ μ ν•", "μ§λ¬Έ μ"],
            )
            .properties(height=260)
        )
        st.altair_chart(chart_ratio, use_container_width=True)
        st.caption("μ „μ²΄ μ§λ¬Έ μ¤‘ μ»¤λ¦¬νλΌμ— ν¬ν•¨λ μ£Όμ μ™€ μ™Έλ¶€ μ£Όμ μ λΉ„μ¨μ…λ‹λ‹¤.")

    # 3) μ£Όμ°¨/ννΈ λΌλ²¨μ΄ κΈΈμ–΄μ„ μλ¦¬λ” λ¬Έμ  ν•΄κ²° β†’ κ°€λ΅ λ§‰λ€ + λΌλ²¨ μ¤„λ°”κΏ
    with col_b:
        st.markdown("**2) μ£Όμ°¨/ννΈλ³„ μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ**")

        # Altair format for long labels (wrap using newline)
        df_curr_by_week["ν•™μµ κµ¬κ°„ μ¤„λ°”κΏ"] = df_curr_by_week["ν•™μµ κµ¬κ°„"].str.replace(" - ", "\n", 1)

        chart_week = (
            alt.Chart(df_curr_by_week)
            .mark_bar()
            .encode(
                x=alt.X("μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ:Q", title="μ§λ¬Έ μ"),
                y=alt.Y(
                    "ν•™μµ κµ¬κ°„ μ¤„λ°”κΏ:N",
                    sort="-x",
                    title="ν•™μµ κµ¬κ°„",
                ),
                color=alt.Color("ν•™μµ κµ¬κ°„ μ¤„λ°”κΏ:N", legend=None),
                tooltip=["ν•™μµ κµ¬κ°„", "μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ"],
            )
            .transform_calculate(
                # optional visually enhance long labels
                wrap_label="replace(datum['ν•™μµ κµ¬κ°„ μ¤„λ°”κΏ'], ' ', '\\n')"
            )
            .properties(height=280)
        )

        st.altair_chart(chart_week, use_container_width=True)
        st.caption("μ§λ¬Έμ΄ κ°€μ¥ λ§μ΄ λ°μƒν• ν•™μµ κµ¬κ°„μ…λ‹λ‹¤.")


# -----------------------------
# νƒ­ 2: AI μ‹¬μΈµ λ¶„μ„
# -----------------------------
with tab_ai:
    st.subheader("AI μ”μ•½ μΈμ‚¬μ΄νΈ")

    col1, col2, col3 = st.columns(3)
    with col1:
      st.info(
              "**κ°€μ¥ μ–΄λ ¤μ΄ ννΈ**\n\n"
              "- Week 3 - Git ν‘μ—…\n"
              "- Week 5 - ν™κ²½ μ„Έν…",
      )
    with col2:
      st.warning(
              "**μ»¤λ¦¬νλΌ μ™Έ μ”κµ¬ μ¦κ°€**\n\n"
              "- ν¬νΈν΄λ¦¬μ¤/μ΄λ ¥μ„\n"
              "- λ©΄μ ‘/μ»¤λ¦¬μ–΄\n"
              "- IDE μ„¤μ •",
      )
    with col3:
      st.success(
              "**λ°”λ΅ μ μ© κ°€λ¥ν• κ°μ„  λ°©ν–¥**\n\n"
              "- Git μ¶©λ μ‹λ‚λ¦¬μ¤ μ‹¤μµ\n"
              "- ν™κ²½ μ„Έν… ν…ν”λ¦Ώ μ κ³µ\n"
              "- ν¬νΈν΄λ¦¬μ¤/μ»¤λ¦¬μ–΄ Q&A μ„Έμ…",
      )

    st.markdown("---")

    st.markdown("### 1. μ»¤λ¦¬νλΌ μ•μ—μ„ μ–΄λ ¤μ›ν•λ” ννΈ")

    st.markdown(
        """
- **Week 3 - Git ν‘μ—…**
  - μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έμ μ•½ **35%**κ°€ μ΄ κµ¬κ°„μ—μ„ λ°μƒν•©λ‹λ‹¤.
  - `μ¶©λ(conflict)`, `λΈλμΉ μ „λµ`, `rebase` λ“± ν‘μ—… κ³Όμ •μ—μ„ μμ£Ό λ°μƒν•λ” μƒν™©μ— λ€ν• μ§λ¬Έμ΄ λ°λ³µλ©λ‹λ‹¤.
- **Week 5 - ν™κ²½ μ„Έν…**
  - `ν™κ²½ λ³€μ`, `ν¨ν‚¤μ§€ λ²„μ „`, `λ΅μ»¬ vs μ„λ²„ μ‹¤ν–‰ μ°¨μ΄` λ“± ν™κ²½ κ΄€λ ¨ μ§λ¬Έμ΄ μ§‘μ¤‘λ©λ‹λ‹¤.
  - β€κ°™μ€ μ„¤μ •μ„ ν–λ‹¤κ³  μƒκ°ν•λ”λ° λ‚΄ ν™κ²½μ—μ„λ§ λ™μ‘ν•μ§€ μ•λ”λ‹¤β€λ” μ ν•μ μ§λ¬Έμ΄ μμ£Ό λ“±μ¥ν•©λ‹λ‹¤.
"""
    )

    with st.expander("μ»¤λ¦¬νλΌ λ‚μ΄λ„ λ¶„μ„ μƒμ„Έ λ³΄κΈ°"):
        st.markdown(
            """
- Week 3 - Git ν‘μ—…
  - μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ: **54κ±΄**
  - μ΄ μ¤‘ Git μ¶©λ ν•΄κ²° κ΄€λ ¨: **27κ±΄**
  - μ£Όλ΅ λ‹¤μκ³Ό κ°™μ€ λ¬Έμ¥μ΄ λ°λ³µλ©λ‹λ‹¤.
    - β€merge ν•κ³  λ‚μ„ μ½”λ“κ°€ μ‚¬λΌμ΅μ–΄μ”.β€
    - β€μ–΄λ–¤ λΈλμΉμ—μ„ μ‘μ—…ν•΄μ•Ό ν•λ”μ§€ ν—·κ°λ¦½λ‹λ‹¤.β€
- Week 5 - ν™κ²½ μ„Έν…
  - μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ: **43κ±΄**
  - ν™κ²½ λ³€μ/λ²„μ „ κ΄€λ ¨: **19κ±΄**
    - β€λ΅μ»¬μ—μ„λ” λλ”λ°, λ‹¤λ¥Έ μ‚¬λ μ»΄ν“¨ν„°μ—μ„λ” μ—λ¬κ°€ λ‚©λ‹λ‹¤.β€
    - β€ν¨ν‚¤μ§€ μ„¤μΉλ” ν–λ”λ°, importκ°€ μ• λ©λ‹λ‹¤.β€
"""
        )

    st.markdown("### 2. μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έμ—μ„ λ“λ¬λ‚ μ¶”κ°€ ν•™μµ μ”κµ¬")

    st.markdown(
        """
- **ν¬νΈν΄λ¦¬μ¤/μ΄λ ¥μ„**
  - β€μ§€κΈ ν•λ” ν”„λ΅μ νΈλ¥Ό μ–΄λ–»κ² ν¬νΈν΄λ¦¬μ¤μ— μ •λ¦¬ν•΄μ•Ό ν• μ§€β€μ— λ€ν• μ§λ¬Έμ΄ λ§μµλ‹λ‹¤.
- **λ©΄μ ‘/μ»¤λ¦¬μ–΄**
  - β€μ΄ κ³Όμ •μ„ λ§μΉκ³  μ–΄λ–¤ μ—­ν• μ„ λ…Έλ ¤μ•Ό ν•λ”μ§€β€, β€κ²½ν—μ„ μ–΄λ–»κ² μ¤ν† λ¦¬λ΅ ν’€μ–΄μ•Ό ν•λ”μ§€β€ λ“±  
    **μ»¤λ¦¬μ–΄ λ°©ν–¥μ„±μ— λ€ν• λ¶μ•**μ΄ λ“λ¬λ‚©λ‹λ‹¤.
- **κ°λ° ν™κ²½ μ„¤μ •(IDE)**
  - VSCode/PyCharmμ—μ„ λ””λ²„κΉ…, ν¬λ§·ν…, κΈ°λ³Έ ν™•μ¥ ν”„λ΅κ·Έλ¨ μ„¤μ • λ“±μ— λ€ν• μ§λ¬Έμ΄ λ°λ³µλ©λ‹λ‹¤.
"""
    )

    with st.expander("μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ λ¶„μ„ μƒμ„Έ λ³΄κΈ°"):
        st.markdown(
            """
- μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ λΉ„μ¤‘: μ „μ²΄μ **27%**  
- μ£Όμ λ³„:
  - ν¬νΈν΄λ¦¬μ¤/μ΄λ ¥μ„: 21κ±΄
  - λ©΄μ ‘/μ»¤λ¦¬μ–΄: 15κ±΄
  - κ°λ° ν™κ²½(IDE): 12κ±΄
  - ν‘μ—…/μ»¤λ®¤λ‹μΌ€μ΄μ…: 10κ±΄

μμ‹ μ§λ¬Έλ“¤:

- β€μ΄ ν”„λ΅μ νΈλ¥Ό ν¬νΈν΄λ¦¬μ¤μ— λ„£μ„ λ• μ–΄λ–¤ κµ¬μ΅°λ΅ μ„¤λ…ν•λ” κ² μΆ‹μ„κΉμ”?β€
- β€μ‹ μ… λ°μ΄ν„° μ§λ¬΄λ¥Ό λ©ν‘λ΅ ν•λ‹¤λ©΄, μ§€κΈ κ³Όμ • μ΄ν›„μ— λ¬΄μ—‡μ„ μ¶”κ°€λ΅ μ¤€λΉ„ν•΄μ•Ό ν• κΉμ”?β€
- β€VSCodeμ—μ„ λ””λ²„κΉ…μ„ μ–΄λ–»κ² μ„¤μ •ν•΄μ•Ό ν• μ§€ λ¨λ¥΄κ² μµλ‹λ‹¤.β€
"""
        )

    st.markdown("### 3. μ μ•λλ” μ»¤λ¦¬νλΌ/μ΄μ κ°μ„  λ°©ν–¥")

    st.markdown(
        """
- **Git ν‘μ—… ννΈ λ³΄μ™„**
  - β€μμ£Ό λ°μƒν•λ” Git μ¶©λ μ‹λ‚λ¦¬μ¤ 3~4κ°β€λ¥Ό μ •λ¦¬ν• μ‹¤μµ μ„Έμ…μ„ λ³„λ„λ΅ κµ¬μ„±ν•©λ‹λ‹¤.
- **ν™κ²½ μ„Έν… ννΈ λ³΄μ™„**
  - κ³µν†µ ν…ν”λ¦Ώ ν”„λ΅μ νΈλ¥Ό μ κ³µν•κ³ , μ„Έν…/μ‹¤ν–‰ κ³Όμ •μ„ ν• λ²μ— λ³΄μ—¬μ£Όλ” μ§§μ€ μμƒ λλ” λ¬Έμ„λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.
- **μ¶”κ°€ μ„Έμ… κΈ°ν**
  - ν¬νΈν΄λ¦¬μ¤/μ΄λ ¥μ„, μ»¤λ¦¬μ–΄/λ©΄μ ‘, IDE μ„¤μ •μ„ λ¬¶μ€ **β€ν„μ—… μ¤€λΉ„/ν™κ²½ μ…‹μ—…β€ λ―Έλ‹λ°μ΄**μ²λΌ μ΄μν•  μ μμµλ‹λ‹¤.
"""
    )

# -----------------------------
# νƒ­ 3: μ§€ν‘ μƒμ„Έ λ³΄κΈ°
# -----------------------------
with tab_detail:
    st.subheader("μ§€ν‘ νƒμƒ‰")

    st.markdown(
        """
μ•„λμ—μ„ λ³΄κ³  μ‹¶μ€ μ§€ν‘ μ ν•μ„ μ„ νƒν•κ³ ,  
κ° μ§€ν‘κ°€ **λ¬΄μ—‡μ„ μλ―Έν•λ”μ§€ μ„¤λ…**κ³Ό ν•¨κ» ν™•μΈν•  μ μμµλ‹λ‹¤.
"""
    )

    subtab1, subtab2, subtab3, subtab4 = st.tabs(
        [
            "μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ (λ‚μ΄λ„)",
            "μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ (μ¶”κ°€ μ”κµ¬)",
            "μ–΄λ ¤μ›€ μ ν• λ¶„ν¬",
            "ν‘ ν•μ‹μΌλ΅ λ³΄κΈ°",
        ]
    )

    # --- μ„λΈ νƒ­ 1: μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ ---
    with subtab1:
        st.markdown("#### μ£Όμ°¨/ννΈλ³„ μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ")

        st.markdown(
            """
- λ§‰λ€κ°€ κΈΈμλ΅ ν•΄λ‹Ή ν•™μµ κµ¬κ°„μ—μ„ **λ” λ§μ€ μ§λ¬Έμ΄ λ‚μ™”λ‹¤**λ” λ»μ…λ‹λ‹¤.  
- μ£Όλ΅ μ΄ κµ¬κ°„μ΄ λ‚μ΄λ„ μƒ/νΌλ€λ„κ°€ λ†’μ€ κµ¬κ°„μΌ κ°€λ¥μ„±μ΄ ν½λ‹λ‹¤.
"""
        )

        chart_week_detail = (
            alt.Chart(df_curr_by_week)
            .mark_bar()
            .encode(
                x=alt.X("μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ:Q", title="μ§λ¬Έ μ"),
                y=alt.Y("ν•™μµ κµ¬κ°„:N", sort="-x", title="ν•™μµ κµ¬κ°„"),
                color=alt.Color("ν•™μµ κµ¬κ°„:N", legend=None),
                tooltip=["ν•™μµ κµ¬κ°„", "μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ"],
            )
            .properties(height=320)
        )
        st.altair_chart(chart_week_detail, use_container_width=True)

    # --- μ„λΈ νƒ­ 2: μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ ---
    with subtab2:
        st.markdown("#### μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ λΉ„μ¨κ³Ό μ£Όμ” μ£Όμ ")

        st.markdown(
            """
- λ¨Όμ € β€μ»¤λ¦¬νλΌμ— ν¬ν•¨λμ§€ μ•μ€ μ§λ¬Έβ€μ΄ μ „μ²΄μ—μ„ μ–΄λ μ •λ„ λΉ„μ¨μΈμ§€ ν™•μΈν•©λ‹λ‹¤.  
- κ·Έ λ‹¤μ, μ–΄λ–¤ μ£Όμ μ— λ€ν• μ”κµ¬κ°€ λ§μ€μ§€ λ³΄κ³  **μ¶”κ°€ μ„Έμ…/μλ£ κΈ°ν**μ— ν™μ©ν•  μ μμµλ‹λ‹¤.
"""
        )

        col_x1, col_x2 = st.columns(2)

        with col_x1:
            st.markdown("**1) μ»¤λ¦¬νλΌ λ‚΄ vs μ™Έ μ§λ¬Έ λΉ„μ¨**")
            chart_ratio_detail = (
                alt.Chart(df_curr_vs_extra)
                .mark_arc(innerRadius=40)
                .encode(
                    theta="μ§λ¬Έ μ:Q",
                    color=alt.Color("μ§λ¬Έ μ ν•:N", legend=alt.Legend(title="μ§λ¬Έ μ ν•")),
                    tooltip=["μ§λ¬Έ μ ν•", "μ§λ¬Έ μ"],
                )
                .properties(height=300)
            )
            st.altair_chart(chart_ratio_detail, use_container_width=True)

        with col_x2:
            st.markdown("**2) μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ μ£Όμ” μ£Όμ  Top4**")
            chart_extra_topics = (
                alt.Chart(df_extra_topics.reset_index())
                .mark_bar()
                .encode(
                    x=alt.X("μ§λ¬Έ μ:Q", title="μ§λ¬Έ μ"),
                    y=alt.Y("μ£Όμ :N", sort="-x", title="μ£Όμ "),
                    color=alt.Color("μ£Όμ :N", legend=None),
                    tooltip=["μ£Όμ ", "μ§λ¬Έ μ"],
                )
                .properties(height=300)
            )
            st.altair_chart(chart_extra_topics, use_container_width=True)

    # --- μ„λΈ νƒ­ 3: μ–΄λ ¤μ›€ μ ν• λ¶„ν¬ ---
    with subtab3:
        st.markdown("#### μ»¤λ¦¬νλΌ λ‚΄μ—μ„ μμ£Ό λ“±μ¥ν• μ–΄λ ¤μ›€ μ ν•")

        st.markdown(
            """
- κ°™μ€ ννΈ μ•μ—μ„λ„ **μ–΄λ–¤ μ ν•μ μ–΄λ ¤μ›€**μ΄ λ§μ€μ§€ ν™•μΈν•  μ μλ” μ§€ν‘μ…λ‹λ‹¤.  
- μ΄ν›„ μ‹¤μµ/μλ£λ¥Ό μ„¤κ³„ν•  λ• **μ–΄λ””μ— μ΄μ μ„ λ§μ¶°μ•Ό ν• μ§€** νλ‹¨ν•λ” κΈ°μ¤€μΌλ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.
"""
        )

        chart_diff_types = (
            alt.Chart(df_curr_difficulty_types.reset_index())
            .mark_bar()
            .encode(
                x=alt.X("μ§λ¬Έ μ:Q", title="μ§λ¬Έ μ"),
                y=alt.Y("μ–΄λ ¤μ›€ μ ν•:N", sort="-x", title="μ–΄λ ¤μ›€ μ ν•"),
                color=alt.Color("μ–΄λ ¤μ›€ μ ν•:N", legend=None),
                tooltip=["μ–΄λ ¤μ›€ μ ν•", "μ§λ¬Έ μ"],
            )
            .properties(height=320)
        )
        st.altair_chart(chart_diff_types, use_container_width=True)

    # --- μ„λΈ νƒ­ 4: ν‘ ν•μ‹ ---
    with subtab4:
        st.markdown("#### μ›λ³Έ μμΉλ¥Ό ν‘λ΅ ν• λ²μ— λ³΄κΈ°")

        st.markdown("**μ£Όμ°¨/ννΈλ³„ μ»¤λ¦¬νλΌ λ‚΄ μ§λ¬Έ μ**")
        st.dataframe(df_curr_by_week, use_container_width=True)

        st.markdown("**μ»¤λ¦¬νλΌ λ‚΄μ—μ„ μμ£Ό λ“±μ¥ν• μ–΄λ ¤μ›€ μ ν•**")
        st.dataframe(df_curr_difficulty_types, use_container_width=True)

        st.markdown("**μ»¤λ¦¬νλΌ μ™Έ μ§λ¬Έ μ£Όμ” μ£Όμ **")
        st.dataframe(df_extra_topics, use_container_width=True)